(this["webpackJsonpverif-vater"]=this["webpackJsonpverif-vater"]||[]).push([[0],{193:function(e,t,a){e.exports=a(314)},313:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);a(194),a(225),a(227),a(228),a(230),a(231),a(232),a(234),a(235),a(236),a(237),a(238),a(240),a(241),a(242),a(243),a(244),a(245),a(247),a(248),a(249),a(250),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269);var n,r=a(0),c=a.n(r),l=a(60),o=a.n(l),u=a(40),i=a.n(u),s=a(41),m=a(49),d=a(16),f=(a(279),a(5)),b=a(43),p=a(320),E=a(319),h=a(321),j=a(322),O=a(86),g=a.n(O),v=a(19),w=a(50),y=(n={},Object(w.a)(n,"/",new v.Page("panel_main","view_main")),Object(w.a)(n,"/auth",new v.Page("panel_auth","view_main")),n),S=new v.Router(y);S.onEnterPage("/",(function(){console.log("\u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")})),S.on("update",(function(e,t){e.getPageId(),e.getParams(),e.getPanelId(),e.getViewId(),e.getLocation(),e.isModal(),e.isPopup(),e.hasOverlay(),t?console.log("move from page ".concat(t.getLocation()," -> ").concat(e.getLocation())):console.log("enter to page ".concat(e.getLocation()))})),S.start();var C=function(e){var t=e.id,a=e.dataOrders,n=Object(v.useRouter)(),l=Object(r.useState)([]),o=Object(d.a)(l,2),u=o[0],i=o[1],m=Object(r.useState)(!1),O=Object(d.a)(m,2),w=O[0],y=O[1],S=Object(r.useState)(!0),C=Object(d.a)(S,2),k=C[0],L=C[1],R=Object(r.useState)(!0),N=Object(d.a)(R,2),x=(N[0],N[1],Object(r.useState)(!0)),I=Object(d.a)(x,2),P=I[0],J=I[1],T=Object(r.useState)([]),z=Object(d.a)(T,2),M=z[0],A=z[1],_=Object(r.useState)([]),D=Object(d.a)(_,2),Y=D[0],G=D[1],Q=Object(r.useState)([]),U=Object(d.a)(Q,2),V=U[0],Z=U[1],W=Object(r.useState)([]),F=Object(d.a)(W,2),H=F[0],B=F[1],q=Object(r.useState)(""),X=Object(d.a)(q,2),K=X[0],$=X[1],ee=Object(r.useState)(""),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],re=Object(r.useState)(""),ce=Object(d.a)(re,2),le=ce[0],oe=ce[1],ue=Object(r.useState)(""),ie=Object(d.a)(ue,2),se=ie[0],me=ie[1],de=Object(r.useState)(null),fe=Object(d.a)(de,2),be=fe[0],pe=fe[1],Ee=Object(r.useState)(""),he=Object(d.a)(Ee,2),je=he[0],Oe=he[1],ge=Object(r.useState)(null),ve=Object(d.a)(ge,2),we=(ve[0],ve[1]),ye=Object(r.useState)("send"),Se=Object(d.a)(ye,2),Ce=(Se[0],Se[1]),ke=Object(r.useRef)(null),Le=Object(r.useRef)(null);Object(r.useEffect)((function(){if(console.log("update dataOrders"),i(a),a.length>0){var e=Object(s.a)(new Set(a.map((function(e){return e.city}))));A(e.map((function(e){return{label:e,value:e}})))}}),[a]);var Re=function(e){console.log(e),Ce("send"),me(e.apartment),pe(e),we(null),P&&setTimeout((function(){Le.current&&Le.current.click()}),200),console.log(Le.current)};return c.a.createElement(f.q,{id:t},c.a.createElement(f.l,null,c.a.createElement(f.e,{onClick:function(){return n.pushModal("modal_database")}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),c.a.createElement(f.e,{after:k?c.a.createElement(p.a,null):c.a.createElement(E.a,null),onClick:function(){return L(!k)}},"\u041b\u043e\u043a\u0430\u0442\u043e\u0440"),c.a.createElement(g.a,{height:k?"auto":0},c.a.createElement(f.j,{top:"\u0413\u043e\u0440\u043e\u0434"},c.a.createElement(f.t,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",searchable:"true",options:M,value:K,onChange:function(e){var t=e.target.value,a=u.filter((function(e){return e.city===t})),n=Object(s.a)(new Set(a.map((function(e){return e.street}))));G(n.map((function(e){return{label:e,value:e}}))),$(t),ne(""),oe(""),me("")}})),""!==K&&c.a.createElement(f.j,{top:"\u0423\u043b\u0438\u0446\u0430"},c.a.createElement(f.t,{disabled:""===K,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u043b\u0438\u0446\u0443",searchable:"true",options:Y,value:ae,onChange:function(e){var t=e.target.value,a=u.filter((function(e){return e.city===K&&e.street===t})),n=Object(s.a)(new Set(a.map((function(e){return e.house}))));Z(n),ne(t),oe(""),me("")}})),""!==ae&&c.a.createElement(f.j,{top:"\u0414\u043e\u043c"},c.a.createElement(f.m,{showArrows:!0,getScrollToLeft:function(e){return e-120},getScrollToRight:function(e){return e+120}},c.a.createElement(f.z,{mode:"buttons",style:{display:"flex"}},V.map((function(e){return c.a.createElement("div",{className:"mh4",key:e},c.a.createElement(f.A,{selected:e===le,onClick:function(){return function(e){var t=u.filter((function(t){return t.city===K&&t.street===ae&&t.house===e}));B(t),oe(e),me("")}(e)}},e))})))))),""!==le&&c.a.createElement(f.j,{top:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430"},c.a.createElement(f.m,{showArrows:!0,getScrollToLeft:function(e){return e-120},getScrollToRight:function(e){return e+120}},c.a.createElement(f.z,{mode:"buttons",style:{display:"flex"}},H.filter((function(e){return!e.transferred})).map((function(e){return c.a.createElement("div",{className:"mh4",key:e.id},c.a.createElement(f.A,{selected:e.apartment===se,onClick:function(){return Re(e)}},e.apartment))})),H.filter((function(e){return e.transferred})).map((function(e){return c.a.createElement("div",{className:"mh4",key:e.id},c.a.createElement(f.A,{selected:e.apartment===se,onClick:function(){return Re(e)},after:c.a.createElement(h.a,{style:{color:"var(--accent)"}})},e.apartment))}))))),""!==se&&c.a.createElement(f.h,null,c.a.createElement(f.i,{getRef:Le,id:"btnPhoto",before:c.a.createElement(j.a,null),controlSize:"l",stretched:!0,accept:"image/*",capture:"camera",onChange:function(e){if(console.log(e.target.files),e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){we(t.result),ke&&ke.current&&setTimeout((function(){return ke.current.focus()}),200)})),t.readAsDataURL(e.target.files[0])}}},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0444\u043e\u0442\u043e")),""!==se&&c.a.createElement(f.h,{style:{display:"flex"}},c.a.createElement(f.n,{value:je,onChange:function(e){return Oe(e.target.value)},type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435",style:{width:"100%",marginRight:8},getRef:ke}),c.a.createElement(f.c,{disabled:0===je.length,onClick:function(){console.log("sendValMeter"),Oe(""),Ce("done");var e=[];u.forEach((function(t){t.id===be.id?e.push(Object(b.a)(Object(b.a)({},t),{},{transferred:!0})):e.push(Object(b.a)({},t))})),i(e);var t=e.filter((function(e){return e.city===K&&e.street===ae&&e.house===le}));B(t)},size:"l"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),c.a.createElement(f.j,null,c.a.createElement(f.f,{checked:P,onChange:function(e){return J(e.target.checked)}},"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b")),""!==se&&c.a.createElement(c.a.Fragment,null,c.a.createElement(f.e,{after:w?c.a.createElement(p.a,null):c.a.createElement(E.a,null),onClick:function(){return y(!w)}},"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"),c.a.createElement(g.a,{height:w?"auto":0},c.a.createElement(f.j,{top:"\u0422\u0438\u043f \u041f\u0423"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043f \u041f\u0423"})),c.a.createElement(f.j,{top:"\u041d\u043e\u043c\u0435\u0440 \u041f\u0423"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u041f\u0423"})),c.a.createElement(f.j,{top:"\u0413\u043e\u0434 \u043f\u043e\u0432\u0435\u0440\u043a\u0438"},c.a.createElement(f.t,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0434 \u043f\u043e\u0432\u0435\u0440\u043a\u0438",searchable:"true",options:Object(s.a)(Array(23).keys()).map((function(e){return{label:(2e3+e).toString(),value:(2e3+e).toString()}}))})),c.a.createElement(f.j,{top:"\u041a\u043b\u0430\u0441\u0441 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438"},c.a.createElement(f.t,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043b\u0430\u0441\u0441 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438",searchable:"true",options:[{label:"1.0",value:"1.0"},{label:"2.0",value:"2.0"},{label:"2.5",value:"2.5"},{label:"5.0",value:"5.0"}]})),c.a.createElement(f.j,{top:"\u0417\u043d\u0430\u0447\u043d\u043e\u0441\u0442\u044c"},c.a.createElement(f.t,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u043d\u043e\u0441\u0442\u044c",searchable:"true",options:[{label:"1",value:"1"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"}]})),c.a.createElement(f.d,{disabled:!0,after:c.a.createElement(f.y,{"aria-label":"\u041f\u043b\u043e\u043c\u0431\u0430 \u043f\u043e\u0432\u0435\u0440\u043a\u0438"})},"\u041f\u043b\u043e\u043c\u0431\u0430 \u043f\u043e\u0432\u0435\u0440\u043a\u0438"),c.a.createElement(f.d,{disabled:!0,after:c.a.createElement(f.y,{"aria-label":"\u041f\u043b\u043e\u043c\u0431\u0430 \u042d\u0421\u041e"})},"\u041f\u043b\u043e\u043c\u0431\u0430 \u042d\u0421\u041e"),c.a.createElement(f.d,{disabled:!0,after:c.a.createElement(f.y,{"aria-label":"\u0410\u043d\u0442\u0438\u043c\u0430\u0433\u043d\u0438\u0442\u043d\u0430\u044f"})},"\u0410\u043d\u0442\u0438\u043c\u0430\u0433\u043d\u0438\u0442\u043d\u0430\u044f"),c.a.createElement(f.j,{top:"\u0414\u0430\u0442\u0430"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",value:(new Date).toLocaleDateString("ru-RU"),onChange:function(){}})),c.a.createElement(f.j,{top:"\u041c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438"})),c.a.createElement(f.j,{top:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"}))))))},k=(a(313),function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://cu56702.tmweb.ru/api/orders/",{method:"POST",body:JSON.stringify(Object(b.a)(Object(b.a)({},t),{},{jwt:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2N1NTY3MDIudG13ZWIucnUiLCJhdWQiOiJodHRwczovL2N1NTY3MDIudG13ZWIucnUiLCJpYXQiOjE2NDcyNzYzMzAsIm5iZiI6MTY0NzM3MTEwNSwiZGF0YSI6eyJpZCI6IjYiLCJlbWFpbCI6InZhc3lhQGNvZGVyLmNvbSJ9fQ.UjeSOi1EPAylN3bA7YyrLUG3LhQ_Duk88C1m0HQVLns"}))}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return{status:"error",message:"Network error"}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=function(e){var t=e.id,a=(e.setModalErrorText,Object(r.useState)("")),n=Object(d.a)(a,2),l=n[0],o=n[1],u=Object(r.useState)(""),i=Object(d.a)(u,2),s=i[0],m=i[1];Object(v.useRouter)();return c.a.createElement(f.q,{id:t},c.a.createElement(f.r,null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),c.a.createElement(f.l,null,c.a.createElement(f.k,null,c.a.createElement(f.j,{top:"\u041b\u043e\u0433\u0438\u043d"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",value:l,onChange:function(e){return o(e.target.value)}})),c.a.createElement(f.j,{top:"\u041f\u0430\u0440\u043e\u043b\u044c"},c.a.createElement(f.n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",value:s,onChange:function(e){return m(e.target.value)}})),c.a.createElement(f.h,null,c.a.createElement(f.c,{type:"submit",stretched:!0,size:"l",disabled:0===l.length||0===s.length},"\u0412\u043e\u0439\u0442\u0438")))))};function R(e){var t=e.id,a=e.modalErrorText,n=Object(v.useRouter)();return c.a.createElement(f.o,{id:t,onClose:function(){return n.popPage()},header:"Error",subheader:a})}var N=a(323);function x(e){var t=e.id,a=e.countDownload,n=e.waitDownload,r=e.loadOrders,l=Object(v.useRouter)();return c.a.createElement(f.o,{id:t,icon:n?c.a.createElement(f.v,{size:"large",style:{margin:"6px 0"}}):c.a.createElement(N.a,null),onClose:function(){return l.popPage()},header:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",subheader:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e ",a," \u0430\u0434\u0440\u0435\u0441\u043e\u0432"),c.a.createElement("p",null,"\u041f\u0440\u043e\u0439\u0434\u0435\u043d\u043e 0 \u0430\u0434\u0440\u0435\u0441\u043e\u0432"))},c.a.createElement(f.u,null),c.a.createElement(f.c,{size:"l",onClick:r,disabled:n},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))}var I=function(){var e=Object(v.useLocation)(),t=Object(v.useRouter)(),a=c.a.useState(null),n=Object(d.a)(a,2),l=n[0],o=n[1],u=Object(r.useState)([]),b=Object(d.a)(u,2),p=b[0],E=b[1],h=Object(r.useState)(""),j=Object(d.a)(h,2),O=j[0],g=j[1],w=Object(r.useState)(0),y=Object(d.a)(w,2),S=y[0],N=y[1],I=Object(r.useState)(!1),P=Object(d.a)(I,2),J=P[0],T=P[1];Object(r.useEffect)((function(){o(c.a.createElement(f.s,null)),M()}),[]);var z=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0),t=[],a=!0,n=0;case 4:if(!a){e.next=12;break}return e.next=7,k({offset:n,count:1e4});case 7:"ok"===(r=e.sent).status&&r.data.length>0?(t=[].concat(Object(s.a)(t),Object(s.a)(r.data)),n+=r.data.length,N(n)):a=!1,a=!1,e.next=4;break;case 12:c=new Response(JSON.stringify(t),{headers:{"content-type":"application/json"}}),caches.open("orders").then((function(e){return e.put("/data.json",c)})),T(!1),E(t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.match("/data.json").then((function(e){return e?e.json():[]})).then((function(e){return e}));case 2:t=e.sent,console.log(t),E(t),N(t.length||0),o(null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=c.a.createElement(f.p,{activeModal:e.getModalId(),onClose:function(){return t.popPage()}},c.a.createElement(R,{id:"modal_error",onClose:function(){return t.popPage()},modalErrorText:O}),c.a.createElement(x,{id:"modal_database",onClose:function(){return t.popPage()},countDownload:S,waitDownload:J,loadOrders:z}));return c.a.createElement(f.g,{webviewType:f.C.INTERNAL},c.a.createElement(f.a,null,c.a.createElement(f.b,null,c.a.createElement(f.x,{modal:A,popout:l,style:{justifyContent:"center"}},c.a.createElement(f.w,{maxWidth:800,spaced:window.innerWidth>800},c.a.createElement(f.B,{id:"view_main",onSwipeBack:function(){return t.popPage()},history:e.hasOverlay()?[]:e.getViewHistory("view_main"),activePanel:e.getViewActivePanel("view_main")},c.a.createElement(C,{id:"panel_main",dataOrders:p}),c.a.createElement(L,{id:"panel_auth",setModalErrorText:g})))))))};o.a.render(c.a.createElement(v.RouterContext.Provider,{value:S},c.a.createElement(I,null)),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.a0e1a555.chunk.js.map