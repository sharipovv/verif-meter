{"version":3,"sources":["components/CropImg.js","panels/Home.js","routers.js","api/api.js","panels/Auth.js","modals/CardError.js","App.js","index.js"],"names":["CroppImg","activePhoto","setActivePhotoCrop","useState","src","setSrc","aspect","crop","setCrop","imageRef","useEffect","unit","width","height","x","y","makeClientCrop","a","getCroppedImg","croppedImageUrl","image","fileName","canvas","document","createElement","pixelRatio","window","devicePixelRatio","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","setTransform","imageSmoothingQuality","drawImage","Promise","resolve","reject","toBlob","blob","name","fileUrl","URL","createObjectURL","console","error","className","onChange","onImageLoaded","onComplete","data","id","city","street","house","apartment","Home","additionalFields","setAdditionalFields","addssFields","setAddssFields","previewFields","setPreviewFields","autoCam","setAutoCam","cityOptions","setCityOptions","streetOptions","setStreetOptions","houseOptions","setHouseOptions","apartmentOptions","setApartmentOptions","cityValue","setCityValue","streetValue","setStreetValue","houseValue","setHouseValue","apartmentValue","setApartmentValue","setActivePhoto","webcamRef","useRef","imgSrc","setImgSrc","cityVariables","Set","map","label","value","capture","useCallback","imageSrc","current","getScreenshot","left","after","onClick","top","placeholder","searchable","options","e","target","streetsOfCity","filter","streetVariables","disabled","housesOfCity","housesVariables","showArrows","getScrollToLeft","i","getScrollToRight","mode","style","display","key","selected","apartmentsOfCity","apartmentsVariables","toggleHouse","log","getElementById","click","before","controlSize","stretched","accept","marginRight","files","length","reader","FileReader","addEventListener","result","readAsDataURL","size","ref","audio","screenshotFormat","videoConstraints","facingMode","screenshotQuality","href","rel","CropImg","checked","Array","keys","toString","aria-label","Date","toLocaleDateString","routes","Page","router","Router","onEnterPage","on","nextRote","oldRoute","getPageId","getParams","getPanelId","getViewId","getLocation","isModal","isPopup","hasOverlay","start","API_URL","addToFormData","formData","object","Object","entries","append","onLogin","FormData","type","axios","post","then","res","auth_hash","tokenFormData","tokenRes","catch","message","Auth","setModalErrorText","login","setLogin","password","setPassword","useRouter","api","auth_data","pushModal","localStorage","setItem","token","u_hash","replacePage","CardError","modalErrorText","onClose","popPage","header","subheader","App","location","useLocation","modal","activeModal","getModalId","getItem","webviewType","WebviewType","INTERNAL","justifyContent","maxWidth","spaced","innerWidth","onSwipeBack","history","getViewHistory","activePanel","getViewActivePanel","ReactDOM","render","Provider"],"mappings":"onBA0FeA,G,OAtFE,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,YAAaC,EAAyB,EAAzBA,mBAAyB,EAChCC,mBAAS,MADuB,mBAC/CC,EAD+C,KAC1CC,EAD0C,OAE9BF,mBAAS,CAC7BG,OAAQ,IAH0C,mBAE/CC,EAF+C,KAEzCC,EAFyC,KAKlDC,EAAW,KAEfC,qBAAU,WACNL,EAAOJ,GACPO,EAAQ,CACJG,KAAM,IACNC,MAAO,GACPC,OAAQ,GACRC,EAAG,GACHC,EAAG,OAER,CAACd,IAEJ,IAQMe,EAAc,uCAAG,WAAOT,GAAP,eAAAU,EAAA,2DACfR,GAAYF,EAAKK,OAASL,EAAKM,QADhB,gCAEeK,EAC1BT,EACAF,EACA,gBALW,OAETY,EAFS,OAOfjB,EAAmBiB,GAPJ,2CAAH,sDAWdD,EAAgB,SAACE,EAAOb,EAAMc,GAChC,IAAMC,EAASC,SAASC,cAAc,UAChCC,EAAaC,OAAOC,iBACpBC,EAASR,EAAMS,aAAeT,EAAMR,MACpCkB,EAASV,EAAMW,cAAgBX,EAAMP,OACrCmB,EAAMV,EAAOW,WAAW,MAoB9B,OAlBAX,EAAOV,MAAQL,EAAKK,MAAQa,EAAaG,EACzCN,EAAOT,OAASN,EAAKM,OAASY,EAAaK,EAE3CE,EAAIE,aAAaT,EAAY,EAAG,EAAGA,EAAY,EAAG,GAClDO,EAAIG,sBAAwB,OAE5BH,EAAII,UACAhB,EACAb,EAAKO,EAAIc,EACTrB,EAAKQ,EAAIe,EACTvB,EAAKK,MAAQgB,EACbrB,EAAKM,OAASiB,EACd,EACA,EACAvB,EAAKK,MAAQgB,EACbrB,EAAKM,OAASiB,GAGX,IAAIO,SAAQ,SAACC,EAASC,GACzBjB,EAAOkB,QACH,SAACC,GACG,GAAKA,EAAL,CAIAA,EAAKC,KAAOrB,EACZ,IAAIsB,EAAUjB,OAAOkB,IAAIC,gBAAgBJ,GACzCH,EAAQK,QALJG,QAAQC,MAAM,qBAOtB,aACA,OAMZ,OACI,yBAAKC,UAAU,YACV5C,GAAO,kBAAC,IAAD,CAAWA,IAAKA,EAAKG,KAAMA,EAAM0C,SAAUzC,EAAS0C,cAhE9C,SAAC9B,GACnBX,EAAWW,GA+DmF+B,WA5D3E,SAAC5C,GACpBS,EAAeT,S,kBCnBnB6C,EAAO,CAAC,CACXC,GAAI,EACJC,KAAM,6CACNC,OAAQ,iFACRC,MAAO,KACPC,UAAW,KACT,CACFJ,GAAI,EACJC,KAAM,6CACNC,OAAQ,iFACRC,MAAO,KACPC,UAAW,KACT,CACFJ,GAAI,EACJC,KAAM,6CACNC,OAAQ,iFACRC,MAAO,KACPC,UAAW,KACT,CACFJ,GAAI,EACJC,KAAM,6CACNC,OAAQ,uCACRC,MAAO,IACPC,UAAW,KACT,CACFJ,GAAI,EACJC,KAAM,6CACNC,OAAQ,uCACRC,MAAO,IACPC,UAAW,KACT,CACFJ,GAAI,EACJC,KAAM,6CACNC,OAAQ,uCACRC,MAAO,IACPC,UAAW,MA6SGC,EA1SF,SAAC,GAAY,IAAVL,EAAS,EAATA,GAAS,EACwBlD,oBAAS,GADjC,mBACjBwD,EADiB,KACCC,EADD,OAEczD,oBAAS,GAFvB,mBAEjB0D,EAFiB,KAEJC,EAFI,OAGkB3D,oBAAS,GAH3B,mBAGjB4D,EAHiB,KAGFC,EAHE,OAIM7D,oBAAS,GAJf,mBAIjB8D,EAJiB,KAIRC,EAJQ,OAMc/D,mBAAS,IANvB,mBAMjBgE,EANiB,KAMJC,EANI,OAOkBjE,mBAAS,IAP3B,mBAOjBkE,EAPiB,KAOFC,EAPE,OAQgBnE,mBAAS,IARzB,mBAQjBoE,EARiB,KAQHC,EARG,OASwBrE,mBAAS,IATjC,mBASjBsE,EATiB,KASCC,EATD,OAWUvE,mBAAS,IAXnB,mBAWjBwE,EAXiB,KAWNC,EAXM,OAYczE,mBAAS,IAZvB,mBAYjB0E,EAZiB,KAYJC,GAZI,QAaY3E,mBAAS,IAbrB,qBAajB4E,GAbiB,MAaLC,GAbK,SAcoB7E,mBAAS,IAd7B,qBAcjB8E,GAdiB,MAcDC,GAdC,SAgBc/E,mBAAS,MAhBvB,qBAgBjBF,GAhBiB,MAgBJkF,GAhBI,SAiBsBhF,mBAAS,MAjB/B,qBAiBAD,IAjBA,aAmBlBkF,GAAYC,iBAAO,MAnBD,GAoBIlF,mBAAS,MApBb,qBAoBjBmF,GApBiB,MAoBTC,GApBS,MAsBxB7E,qBAAU,WACT,IAAI8E,EAAa,YAAO,IAAIC,IAAIrC,EAAKsC,KAAI,SAAA5E,GAAC,OAAIA,EAAEwC,UAChDc,EAAeoB,EAAcE,KAAI,SAAA5E,GAAO,MAAO,CAAE6E,MAAO7E,EAAG8E,MAAO9E,SAChE,IAEH,IAAM+E,GAAUC,uBAAY,WAC3B,IAAMC,EAAWX,GAAUY,QAAQC,gBACnCV,GAAUQ,KACR,CAACX,GAAWG,KAkDf,OAAO,kBAAC,IAAD,CAAOlC,GAAIA,GACjB,kBAAC,IAAD,CACC6C,KAAM,kBAAC,IAAD,KAAmB,kBAAC,IAAD,QAD1B,4BAKA,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAYC,MAAOtC,EAAc,kBAAC,IAAD,MAAsB,kBAAC,IAAD,MAAuBuC,QAAS,kBAAMtC,GAAgBD,KAA7G,8CACA,kBAAC,IAAD,CAAehD,OAAQgD,EAAc,OAAS,GAS7C,kBAAC,IAAD,CAAUwC,IAAI,kCACb,kBAAC,IAAD,CACCC,YAAY,kFACZC,WAAW,OACXC,QAASrC,EACTyB,MAAOjB,EACP1B,SA5Dc,SAACwD,GACnB,IAAInD,EAAOmD,EAAEC,OAAOd,MAChBe,EAAgBvD,EAAKwD,QAAO,SAAA9F,GAAC,OAAIA,EAAEwC,OAASA,KAC5CuD,EAAe,YAAO,IAAIpB,IAAIkB,EAAcjB,KAAI,SAAA5E,GAAC,OAAIA,EAAEyC,YAC3De,EAAiBuC,EAAgBnB,KAAI,SAAA5E,GAAO,MAAO,CAAE6E,MAAO7E,EAAG8E,MAAO9E,OACtE8D,EAAatB,GACbwB,GAAe,IACfE,GAAc,IACdE,GAAkB,QAuDD,KAAdP,GAAoB,kBAAC,IAAD,CAAU0B,IAAI,kCAClC,kBAAC,IAAD,CACCS,SAAwB,KAAdnC,EACV2B,YAAY,kFACZC,WAAW,OACXC,QAASnC,EACTuB,MAAOf,EACP5B,SA3DgB,SAACwD,GACrB,IAAIlD,EAASkD,EAAEC,OAAOd,MAClBmB,EAAe3D,EAAKwD,QAAO,SAAA9F,GAAC,OAAIA,EAAEwC,OAASqB,GAAa7D,EAAEyC,SAAWA,KACrEyD,EAAe,YAAO,IAAIvB,IAAIsB,EAAarB,KAAI,SAAA5E,GAAC,OAAIA,EAAE0C,WAC1DgB,EAAgBwC,GAChBlC,GAAevB,GACfyB,GAAc,IACdE,GAAkB,QAuDC,KAAhBL,GAAsB,kBAAC,IAAD,CAAUwB,IAAI,sBACpC,kBAAC,IAAD,CACCY,YAAU,EACVC,gBAAiB,SAACC,GAAD,OAAOA,EAAI,KAC5BC,iBAAkB,SAACD,GAAD,OAAOA,EAAI,MAE7B,kBAAC,IAAD,CAAME,KAAK,UAAUC,MAAO,CAAEC,QAAS,SACrChD,EAAamB,KAAI,SAAAyB,GAAC,OAAI,yBAAKnE,UAAU,MAAMwE,IAAKL,GAChD,kBAAC,IAAD,CACCM,SAAUN,IAAMpC,GAChBqB,QAAS,kBA9DG,SAAC5C,GACpB,IAAIkE,EAAmBtE,EAAKwD,QAAO,SAAA9F,GAAC,OAAIA,EAAEwC,OAASqB,GAAa7D,EAAEyC,SAAWsB,GAAe/D,EAAE0C,QAAUA,KACpGmE,EAAmB,YAAO,IAAIlC,IAAIiC,EAAiBhC,KAAI,SAAA5E,GAAC,OAAIA,EAAE2C,eAClEiB,EAAoBiD,GACpB3C,GAAcxB,GACd0B,GAAkB,IAyDI0C,CAAYT,KAE1BA,WAOS,KAAfpC,IAAqB,kBAAC,IAAD,CAAUsB,IAAI,oDACnC,kBAAC,IAAD,CACCY,YAAU,EACVC,gBAAiB,SAACC,GAAD,OAAOA,EAAI,KAC5BC,iBAAkB,SAACD,GAAD,OAAOA,EAAI,MAE7B,kBAAC,IAAD,CAAME,KAAK,UAAUC,MAAO,CAAEC,QAAS,SACrC9C,EAAiBiB,KAAI,SAAAyB,GAAC,OAAI,yBAAKnE,UAAU,MAAMwE,IAAKL,GACpD,kBAAC,IAAD,CACCM,SAAUN,IAAMlC,GAChBmB,QAAS,kBAzES3C,EAyEa0D,EAxErCrE,QAAQ+E,IAAIpE,GACZyB,GAAkBzB,QACdQ,GACH1C,SAASuG,eAAe,YAAYC,SAJd,IAACtE,IA2EjB0D,UAON,kBAAC,IAAD,KAAU,kBAAC,IAAD,+dACV,kBAAC,IAAD,CAAKG,MAAO,CAAEC,QAAS,SAEtB,kBAAC,IAAD,CAAMlE,GAAG,WAAW2E,OAAQ,kBAAC,IAAD,MAAkBC,YAAY,IAAIC,WAAS,EAACC,OAAO,UAAUtC,QAAQ,SAASyB,MAAO,CAAEc,YAAa,GAAKnF,SA7HrH,SAACwD,GAEnB,GADA3D,QAAQ+E,IAAIpB,EAAEC,OAAO2B,OACjB5B,EAAEC,OAAO2B,OAAS5B,EAAEC,OAAO2B,MAAMC,OAAS,EAAG,CAChD,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,kBAC/BtD,GAAeoD,EAAOG,WAEvBH,EAAOI,cAAclC,EAAEC,OAAO2B,MAAM,OAsHnC,uEAGA,kBAAC,IAAD,CAAQrF,UAAU,UAAUgF,OAAQ,kBAAC,IAAD,MAAkBY,KAAK,IAAIvB,KAAK,YAAYa,WAAS,EAACpB,UAAQ,GAAlG,8EAGD,kBAAC,IAAD,KAAU,kBAAC,IAAD,gUACV,kBAAC,IAAD,CACC+B,IAAKzD,GACLkC,MAAO,CAAE1G,MAAO,QAChBkI,OAAO,EACPC,iBAAiB,aACjBC,iBAAkB,CACjBC,WAAY,eAEbC,kBAAmB,IAEpB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAQlB,OAAQ,kBAAC,IAAD,MAAkBY,KAAK,IAAIV,WAAS,EAAC9B,QAASP,IAA9D,wEAEAP,IACA,uBAAG6D,KAAM7D,GAAQoB,OAAO,SAAS0C,IAAI,uBACpC,yBACChJ,IAAKkF,MAKR,kBAAC+D,EAAD,CAASpJ,YAAaA,GAAaC,mBAAoBA,KAEvD,kBAAC,IAAD,CAAUmG,IAAI,0DACb,kBAAC,IAAD,CAAOC,YAAY,uGAEpB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAQsC,KAAK,IAAIV,WAAS,GAA1B,2DAED,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAUoB,QAASrF,EAAShB,SAAU,SAAAwD,GAAC,OAAIvC,EAAWuC,EAAEC,OAAO4C,WAA/D,8KACA,kBAAC,IAAD,uPACA,kBAAC,IAAD,CAAUA,QAASvF,EAAed,SAAU,SAAAwD,GAAC,OAAIzC,EAAiByC,EAAEC,OAAO4C,WAA3E,sGAGD,kBAAC,IAAD,CAAYnD,MAAOxC,EAAmB,kBAAC,IAAD,MAAsB,kBAAC,IAAD,MAAuByC,QAAS,kBAAMxC,GAAqBD,KAAvH,iHACA,kBAAC,IAAD,CAAe9C,OAAQ8C,EAAmB,OAAS,GAClD,kBAAC,IAAD,CAAU0C,IAAI,mCACb,kBAAC,IAAD,CAAOC,YAAY,gFAEpB,kBAAC,IAAD,CAAUD,IAAI,+CACb,kBAAC,IAAD,CAAOC,YAAY,4FAEpB,kBAAC,IAAD,CAAUD,IAAI,iEACb,kBAAC,IAAD,CACCC,YAAY,iHACZC,WAAW,OACXC,QAAS,YAAI+C,MAAM,IAAIC,QAAQ9D,KAAI,SAAAyB,GAClC,MAAO,CAAExB,OAAQ,IAAOwB,GAAGsC,WAAY7D,OAAQ,IAAOuB,GAAGsC,kBAI5D,kBAAC,IAAD,CAAUpD,IAAI,mFACb,kBAAC,IAAD,CACCC,YAAY,mIACZC,WAAW,OACXC,QAAS,CAAC,CACTb,MAAO,MACPC,MAAO,OAER,CACCD,MAAO,MACPC,MAAO,OAER,CACCD,MAAO,MACPC,MAAO,OAER,CACCD,MAAO,MACPC,MAAO,WAIV,kBAAC,IAAD,CAAUS,IAAI,0DACb,kBAAC,IAAD,CACCC,YAAY,0GACZC,WAAW,OACXC,QAAS,CAAC,CACTb,MAAO,IACPC,MAAO,KACL,CACFD,MAAO,IACPC,MAAO,KAER,CACCD,MAAO,IACPC,MAAO,KAER,CACCD,MAAO,IACPC,MAAO,KAER,CACCD,MAAO,IACPC,MAAO,SAIV,kBAAC,IAAD,CACCkB,UAAQ,EACRX,MAAO,kBAAC,IAAD,CAAQuD,aAAW,qFAF3B,mFAMA,kBAAC,IAAD,CACC5C,UAAQ,EACRX,MAAO,kBAAC,IAAD,CAAQuD,aAAW,6DAF3B,2DAMA,kBAAC,IAAD,CACC5C,UAAQ,EACRX,MAAO,kBAAC,IAAD,CAAQuD,aAAW,oFAF3B,kFAMA,kBAAC,IAAD,CAAUrD,IAAI,4BACb,kBAAC,IAAD,CAAOC,YAAY,sEAAeV,OAAO,IAAI+D,MAAOC,mBAAmB,SAAU3G,SAAU,gBAE5F,kBAAC,IAAD,CAAUoD,IAAI,yFACb,kBAAC,IAAD,CAAOC,YAAY,sIAEpB,kBAAC,IAAD,CAAUD,IAAI,gEACb,kBAAC,IAAD,CAAOC,YAAY,6GAEpB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAQsC,KAAK,IAAIV,WAAS,GAA1B,+D,gBCjUC2B,GAAM,mBAda,IAeX,IAAIC,OAZQ,aAGD,cAQb,cAba,QAeX,IAAIA,OAZQ,aAED,cAQb,GAKCC,EAAS,IAAIC,SAAOH,GAEjCE,EAAOE,YArBkB,KAqBK,WAC7BnH,QAAQ+E,IAAI,0JAGbkC,EAAOG,GAAG,UAAU,SAACC,EAAUC,GAC9BD,EAASE,YACTF,EAASG,YACTH,EAASI,aACTJ,EAASK,YACTL,EAASM,cACTN,EAASO,UACTP,EAASQ,UACTR,EAASS,aAELR,EACHtH,QAAQ+E,IAAR,yBAA8BuC,EAASK,cAAvC,eAA2DN,EAASM,gBAEpE3H,QAAQ+E,IAAR,wBAA6BsC,EAASM,mBAIxCV,EAAOc,Q,oCC1CDC,EAAU,oCAEVC,EAAgB,SAACC,EAAUC,GAC7B,cAAyBC,OAAOC,QAAQF,GAAxC,eAAiD,CAAC,IAAD,sBAAvCzD,EAAuC,KAAlC5B,EAAkC,KACxCA,GACLoF,EAASI,OAAO5D,EAAK5B,GAEzB,OAAOoF,GAGEK,EAAU,SAACjI,GACpB,IAAI4H,EAAW,IAAIM,SAEnB,OADAP,EAAcC,EAAD,YAAC,eAAe5H,GAAhB,IAAsBmI,KAAM,YAClCC,IAAMC,KAAKX,EAAU,OAAQE,GAC/BU,MAAK,SAAAC,GAAG,OAAIA,EAAIvI,QAChBsI,MAAK,SAAAC,GACF,GAAIA,EAAIC,UAAW,CACf,IAAIC,EAAgB,IAAIP,SAIxB,OAHAP,EAAcc,EAAe,CACzBD,UAAWD,EAAIC,YAEZJ,IAAMC,KAAKX,EAAU,QAASe,GAChCH,MAAK,SAAAI,GAAQ,OAAIA,EAAS1I,QAC1BsI,MAAK,SAAAC,GACF,OAAIA,EAAIvI,KACGuI,EAAIvI,KACDuI,KAEnB,OAAOA,KAEjBI,OAAM,SAAAtF,GAAO,MAAO,CAAEuF,QAAS,qBCSzBC,EAnCF,SAAC,GAA+B,IAA7B5I,EAA4B,EAA5BA,GAAI6I,EAAwB,EAAxBA,kBAAwB,EACjB/L,mBAAS,IADQ,mBACpCgM,EADoC,KAC7BC,EAD6B,OAEXjM,mBAAS,IAFE,mBAEpCkM,EAFoC,KAE1BC,EAF0B,KAIrCvC,EAASwC,sBAETlB,EAAO,uCAAG,4BAAApK,EAAA,sEACSuL,EAAY,CAAEL,QAAOE,aAD9B,QACTI,EADS,QAEDT,SACbE,EAAkBO,EAAUT,SAC5BjC,EAAO2C,UFJiB,iBEMxBC,aAAaC,QAAQ,QAASH,EAAUI,OACxCF,aAAaC,QAAQ,SAAUH,EAAUK,QACzC/C,EAAOgD,YFlBe,MEUR,2CAAH,qDAWb,OAAO,kBAAC,IAAD,CAAO1J,GAAIA,GACjB,kBAAC,IAAD,2EACA,kBAAC,IAAD,KACC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAUgD,IAAI,kCACb,kBAAC,IAAD,CAAOC,YAAY,4EAAgBV,MAAOuG,EAAOlJ,SAAU,SAACwD,GAAD,OAAO2F,EAAS3F,EAAEC,OAAOd,WAErF,kBAAC,IAAD,CAAUS,IAAI,wCACb,kBAAC,IAAD,CAAOC,YAAY,kFAAiBiF,KAAK,WAAW3F,MAAOyG,EAAUpJ,SAAU,SAACwD,GAAD,OAAO6F,EAAY7F,EAAEC,OAAOd,WAE5G,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAQ2F,KAAK,SAASrD,WAAS,EAACU,KAAK,IAAIxC,QAASiF,EAASvE,SAA2B,IAAjBqF,EAAM7D,QAAoC,IAApB+D,EAAS/D,QAApG,uCC9BE,SAAS0E,EAAT,GAA4C,IAAvB3J,EAAsB,EAAtBA,GAAI4J,EAAkB,EAAlBA,eACzBlD,EAASwC,sBACf,OAAO,kBAAC,IAAD,CACNlJ,GAAIA,EACJ6J,QAAS,kBAAMnD,EAAOoD,WACtBC,OAAO,QACPC,UAAWJ,ICwCEK,MAzCf,WACC,IAAMC,EAAWC,wBACXzD,EAASwC,sBAFD,EAI8BpM,mBAAS,IAJvC,mBAIP8M,EAJO,KAISf,EAJT,KAMRuB,EAAQ,kBAAC,IAAD,CAAWC,YAAaH,EAASI,aAC9CT,QAAS,kBAAMnD,EAAOoD,YAEtB,kBAACH,EAAD,CAAW3J,GJNc,cIMG6J,QAAS,kBAAMnD,EAAOoD,WAAWF,eAAgBA,KAU9E,OAPAvM,qBAAU,WACJiM,aAAaiB,QAAQ,UAAajB,aAAaiB,QAAQ,WAC3D7D,EAAOgD,YJpBe,WIsBrB,CAAChD,IAGG,kBAAC,IAAD,CAAgB8D,YAAaC,IAAYC,UAC/C,kBAAC,IAAD,KACC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAaN,MAAOA,EAAOnG,MAAO,CAAE0G,eAAgB,WACnD,kBAAC,IAAD,CAAUC,SAAU,IAAKC,OAAQxM,OAAOyM,WAAa,KACpD,kBAAC,IAAD,CAAM9K,GJzBa,YI0BlB+K,YAAa,kBAAMrE,EAAOoD,WAC1BkB,QAASd,EAAS3C,aAAe,GAAK2C,EAASe,eJ3B7B,aI4BlBC,YAAahB,EAASiB,mBJ5BJ,cI8BlB,kBAAC,EAAD,CAAMnL,GJjCa,eIkCnB,kBAAC,EAAD,CAAMA,GJjCa,aIiCG6I,kBAAmBA,WC/BhDuC,IAASC,OAAO,kBAAC,gBAAcC,SAAf,CAAwB/I,MAAOmE,GAC9C,kBAAC,EAAD,OAC0BxI,SAASuG,eAAe,W","file":"static/js/main.77195ecd.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport \"react-image-crop/dist/ReactCrop.css\";\r\n\r\nconst CroppImg = ({ activePhoto, setActivePhotoCrop }) => {\r\n    const [src, setSrc] = useState(null);\r\n    const [crop, setCrop] = useState({\r\n        aspect: 4 / 1,\r\n    });\r\n    let imageRef = null;\r\n\r\n    useEffect(() => {\r\n        setSrc(activePhoto)\r\n        setCrop({\r\n            unit: '%',\r\n            width: 40,\r\n            height: 10,\r\n            x: 25,\r\n            y: 25\r\n        })\r\n    }, [activePhoto]);\r\n\r\n    const onImageLoaded = (image) => {\r\n        imageRef = image;\r\n    };\r\n\r\n    const onCropComplete = (crop) => {\r\n        makeClientCrop(crop);\r\n    };\r\n\r\n    const makeClientCrop = async (crop) => {\r\n        if (imageRef && crop.width && crop.height) {\r\n            const croppedImageUrl = await getCroppedImg(\r\n                imageRef,\r\n                crop,\r\n                'newFile.jpeg'\r\n            );\r\n            setActivePhotoCrop(croppedImageUrl);\r\n        }\r\n    }\r\n\r\n    const getCroppedImg = (image, crop, fileName) => {\r\n        const canvas = document.createElement('canvas');\r\n        const pixelRatio = window.devicePixelRatio;\r\n        const scaleX = image.naturalWidth / image.width;\r\n        const scaleY = image.naturalHeight / image.height;\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = crop.width * pixelRatio * scaleX;\r\n        canvas.height = crop.height * pixelRatio * scaleY;\r\n\r\n        ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\r\n        ctx.imageSmoothingQuality = 'high';\r\n\r\n        ctx.drawImage(\r\n            image,\r\n            crop.x * scaleX,\r\n            crop.y * scaleY,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY,\r\n            0,\r\n            0,\r\n            crop.width * scaleX,\r\n            crop.height * scaleY\r\n        );\r\n\r\n        return new Promise((resolve, reject) => {\r\n            canvas.toBlob(\r\n                (blob) => {\r\n                    if (!blob) {\r\n                        console.error('Canvas is empty');\r\n                        return;\r\n                    }\r\n                    blob.name = fileName;\r\n                    let fileUrl = window.URL.createObjectURL(blob);\r\n                    resolve(fileUrl);\r\n                },\r\n                'image/jpeg',\r\n                1\r\n            );\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"cropItem\">\r\n            {src && <ReactCrop src={src} crop={crop} onChange={setCrop} onImageLoaded={onImageLoaded} onComplete={onCropComplete} />}\r\n        </div>\r\n    );\r\n};\r\nexport default CroppImg","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Panel, PanelHeader, Button, Group, Tabs, TabsItem, Cell, FormItem, File, CellButton, Input, Switch, HorizontalScroll, Select, Checkbox, Div, PanelHeaderButton, FormStatus } from '@vkontakte/vkui';\r\n\r\nimport { Icon24Camera, Icon24ChevronDown, Icon24ChevronUp, Icon28HelpCircleOutline } from '@vkontakte/icons';\r\nimport AnimateHeight from 'react-animate-height';\r\nimport CropImg from '../components/CropImg'\r\nimport Webcam from 'react-webcam';\r\n\r\nlet data = [{\r\n\tid: 1,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Чернышевского\",\r\n\thouse: \"22\",\r\n\tapartment: \"1\",\r\n}, {\r\n\tid: 2,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Чернышевского\",\r\n\thouse: \"22\",\r\n\tapartment: \"2\",\r\n}, {\r\n\tid: 3,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Чернышевского\",\r\n\thouse: \"22\",\r\n\tapartment: \"3\",\r\n}, {\r\n\tid: 4,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"2\",\r\n}, {\r\n\tid: 5,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"3\",\r\n}, {\r\n\tid: 5,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"3\",\r\n\tapartment: \"3\",\r\n}]\r\n\r\nconst Home = ({ id }) => {\r\n\tconst [additionalFields, setAdditionalFields] = useState(false)\r\n\tconst [addssFields, setAddssFields] = useState(true)\r\n\tconst [previewFields, setPreviewFields] = useState(true)\r\n\tconst [autoCam, setAutoCam] = useState(true)\r\n\r\n\tconst [cityOptions, setCityOptions] = useState([])\r\n\tconst [streetOptions, setStreetOptions] = useState([])\r\n\tconst [houseOptions, setHouseOptions] = useState([])\r\n\tconst [apartmentOptions, setApartmentOptions] = useState([])\r\n\r\n\tconst [cityValue, setCityValue] = useState('')\r\n\tconst [streetValue, setStreetValue] = useState('')\r\n\tconst [houseValue, setHouseValue] = useState('')\r\n\tconst [apartmentValue, setApartmentValue] = useState('')\r\n\r\n\tconst [activePhoto, setActivePhoto] = useState(null)\r\n\tconst [activePhotoCrop, setActivePhotoCrop] = useState(null)\r\n\r\n\tconst webcamRef = useRef(null);\r\n\tconst [imgSrc, setImgSrc] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet cityVariables = [...new Set(data.map(x => x.city))]\r\n\t\tsetCityOptions(cityVariables.map(x => { return { label: x, value: x } }))\r\n\t}, []);\r\n\r\n\tconst capture = useCallback(() => {\r\n\t\tconst imageSrc = webcamRef.current.getScreenshot();\r\n\t\tsetImgSrc(imageSrc);\r\n\t}, [webcamRef, setImgSrc]);\r\n\r\n\tconst changeFile = (e) => {\r\n\t\tconsole.log(e.target.files)\r\n\t\tif (e.target.files && e.target.files.length > 0) {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener('load', () =>\r\n\t\t\t\tsetActivePhoto(reader.result)\r\n\t\t\t);\r\n\t\t\treader.readAsDataURL(e.target.files[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tconst toggleCity = (e) => {\r\n\t\tlet city = e.target.value\r\n\t\tlet streetsOfCity = data.filter(x => x.city === city)\r\n\t\tlet streetVariables = [...new Set(streetsOfCity.map(x => x.street))]\r\n\t\tsetStreetOptions(streetVariables.map(x => { return { label: x, value: x } }))\r\n\t\tsetCityValue(city)\r\n\t\tsetStreetValue('')\r\n\t\tsetHouseValue('')\r\n\t\tsetApartmentValue('')\r\n\t}\r\n\r\n\tconst toggleStreet = (e) => {\r\n\t\tlet street = e.target.value\r\n\t\tlet housesOfCity = data.filter(x => x.city === cityValue && x.street === street)\r\n\t\tlet housesVariables = [...new Set(housesOfCity.map(x => x.house))]\r\n\t\tsetHouseOptions(housesVariables)\r\n\t\tsetStreetValue(street)\r\n\t\tsetHouseValue('')\r\n\t\tsetApartmentValue('')\r\n\t}\r\n\r\n\tconst toggleHouse = (house) => {\r\n\t\tlet apartmentsOfCity = data.filter(x => x.city === cityValue && x.street === streetValue && x.house === house)\r\n\t\tlet apartmentsVariables = [...new Set(apartmentsOfCity.map(x => x.apartment))]\r\n\t\tsetApartmentOptions(apartmentsVariables)\r\n\t\tsetHouseValue(house)\r\n\t\tsetApartmentValue('')\r\n\t}\r\n\r\n\tconst toggleApartment = (apartment) => {\r\n\t\tconsole.log(apartment)\r\n\t\tsetApartmentValue(apartment)\r\n\t\tif (autoCam)\r\n\t\t\tdocument.getElementById('btnPhoto').click()\r\n\t}\r\n\r\n\r\n\treturn <Panel id={id}>\r\n\t\t<PanelHeader\r\n\t\t\tleft={<PanelHeaderButton><Icon28HelpCircleOutline /></PanelHeaderButton>}\r\n\t\t>\r\n\t\t\tСъём\r\n\t\t</PanelHeader>\r\n\t\t<Group>\r\n\t\t\t<CellButton after={addssFields ? <Icon24ChevronUp /> : <Icon24ChevronDown />} onClick={() => setAddssFields(!addssFields)}>Локатор</CellButton>\r\n\t\t\t<AnimateHeight height={addssFields ? 'auto' : 0}>\r\n\t\t\t\t{/* <FormItem top=\"Город\">\r\n\t\t\t\t\t<Selectect\r\n\t\t\t\t\t\tclassName='CustomSelectectAsVk'\r\n\t\t\t\t\t\tclassNamePrefix=\"react-select\"\r\n\t\t\t\t\t\toptions={cityOptions}\r\n\t\t\t\t\t\tplaceholder='Выберите город'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem> */}\r\n\t\t\t\t<FormItem top=\"Город\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"Выберите город\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={cityOptions}\r\n\t\t\t\t\t\tvalue={cityValue}\r\n\t\t\t\t\t\tonChange={toggleCity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t{cityValue !== '' && <FormItem top=\"Улица\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdisabled={cityValue === ''}\r\n\t\t\t\t\t\tplaceholder=\"Выберите улицу\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={streetOptions}\r\n\t\t\t\t\t\tvalue={streetValue}\r\n\t\t\t\t\t\tonChange={toggleStreet}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>}\r\n\t\t\t\t{streetValue !== '' && <FormItem top=\"Дом\">\r\n\t\t\t\t\t<HorizontalScroll\r\n\t\t\t\t\t\tshowArrows\r\n\t\t\t\t\t\tgetScrollToLeft={(i) => i - 120}\r\n\t\t\t\t\t\tgetScrollToRight={(i) => i + 120}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tabs mode=\"buttons\" style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t{houseOptions.map(i => <div className='mv4' key={i}>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tselected={i === houseValue}\r\n\t\t\t\t\t\t\t\t\tonClick={() => toggleHouse(i)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i}\r\n\t\t\t\t\t\t\t\t</TabsItem>\r\n\t\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</HorizontalScroll>\r\n\t\t\t\t</FormItem>}\r\n\t\t\t</AnimateHeight>\r\n\t\t\t{houseValue !== '' && <FormItem top=\"Квартира\">\r\n\t\t\t\t<HorizontalScroll\r\n\t\t\t\t\tshowArrows\r\n\t\t\t\t\tgetScrollToLeft={(i) => i - 120}\r\n\t\t\t\t\tgetScrollToRight={(i) => i + 120}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Tabs mode=\"buttons\" style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t{apartmentOptions.map(i => <div className='mv4' key={i}>\r\n\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\tselected={i === apartmentValue}\r\n\t\t\t\t\t\t\t\tonClick={() => toggleApartment(i)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i}\r\n\t\t\t\t\t\t\t</TabsItem>\r\n\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</HorizontalScroll>\r\n\t\t\t</FormItem>}\r\n\r\n\t\t\t<FormItem><FormStatus>1 вариант. Стандартная камера, чекбокс для автоматического открытия после выбора квартиры</FormStatus></FormItem>\r\n\t\t\t<Div style={{ display: 'flex' }}>\r\n\r\n\t\t\t\t<File id='btnPhoto' before={<Icon24Camera />} controlSize=\"l\" stretched accept=\"image/*\" capture='camera' style={{ marginRight: 8 }} onChange={changeFile}>\r\n\t\t\t\t\tСделать фото\r\n\t\t\t\t</File>\r\n\t\t\t\t<Button className='btnText' before={<Icon24Camera />} size=\"l\" mode=\"secondary\" stretched disabled>Просмотр фото</Button>\r\n\t\t\t</Div>\r\n\r\n\t\t\t<FormItem><FormStatus>2 вариант. Всегда открытая \"веб-камера\". Качество как на экране. </FormStatus></FormItem>\r\n\t\t\t<Webcam\r\n\t\t\t\tref={webcamRef}\r\n\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\taudio={false}\r\n\t\t\t\tscreenshotFormat=\"image/jpeg\"\r\n\t\t\t\tvideoConstraints={{\r\n\t\t\t\t\tfacingMode: \"environment\"\r\n\t\t\t\t}}\r\n\t\t\t\tscreenshotQuality={1}\r\n\t\t\t/>\r\n\t\t\t<Div>\r\n\t\t\t\t<Button before={<Icon24Camera />} size=\"l\" stretched onClick={capture}>Сделать фото</Button>\r\n\t\t\t</Div>\r\n\t\t\t{imgSrc && (\r\n\t\t\t\t<a href={imgSrc} target='_blank' rel=\"noopener noreferrer\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t)}\r\n\r\n\t\t\t<CropImg activePhoto={activePhoto} setActivePhotoCrop={setActivePhotoCrop} />\r\n\r\n\t\t\t<FormItem top='Показание'>\r\n\t\t\t\t<Input placeholder='Введите показание' />\r\n\t\t\t</FormItem>\r\n\t\t\t<FormItem>\r\n\t\t\t\t<Button size='l' stretched>Отправить</Button>\r\n\t\t\t</FormItem>\r\n\t\t\t<FormItem>\r\n\t\t\t\t<Checkbox checked={autoCam} onChange={e => setAutoCam(e.target.checked)}>Автоматическое открытие камеры</Checkbox>\r\n\t\t\t\t<Checkbox>Автоматический переход к следующей квартире</Checkbox>\r\n\t\t\t\t<Checkbox checked={previewFields} onChange={e => setPreviewFields(e.target.checked)}>Предпросмотр фото</Checkbox>\r\n\t\t\t</FormItem>\r\n\r\n\t\t\t<CellButton after={additionalFields ? <Icon24ChevronUp /> : <Icon24ChevronDown />} onClick={() => setAdditionalFields(!additionalFields)}>Дополнительные поля</CellButton>\r\n\t\t\t<AnimateHeight height={additionalFields ? 'auto' : 0}>\r\n\t\t\t\t<FormItem top='Тип ПУ'>\r\n\t\t\t\t\t<Input placeholder='Введите тип ПУ' />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top='Номер ПУ'>\r\n\t\t\t\t\t<Input placeholder='Введите номер ПУ' />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top=\"Год поверки\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"Выберите год поверки\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={[...Array(23).keys()].map(i => {\r\n\t\t\t\t\t\t\treturn { label: (2000 + i).toString(), value: (2000 + i).toString() }\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top=\"Класс точности\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"Выберите класс точности\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={[{\r\n\t\t\t\t\t\t\tlabel: \"1.0\",\r\n\t\t\t\t\t\t\tvalue: \"1.0\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"2.0\",\r\n\t\t\t\t\t\t\tvalue: \"2.0\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"2.5\",\r\n\t\t\t\t\t\t\tvalue: \"2.5\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"5.0\",\r\n\t\t\t\t\t\t\tvalue: \"5.0\",\r\n\t\t\t\t\t\t}]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top=\"Значность\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"Выберите значность\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={[{\r\n\t\t\t\t\t\t\tlabel: \"1\",\r\n\t\t\t\t\t\t\tvalue: \"1\",\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tlabel: \"4\",\r\n\t\t\t\t\t\t\tvalue: \"4\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"5\",\r\n\t\t\t\t\t\t\tvalue: \"5\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"6\",\r\n\t\t\t\t\t\t\tvalue: \"6\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"7\",\r\n\t\t\t\t\t\t\tvalue: \"7\",\r\n\t\t\t\t\t\t}]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<Cell\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t\tafter={<Switch aria-label=\"Пломба поверки\" />}\r\n\t\t\t\t>\r\n\t\t\t\t\tПломба поверки\r\n\t\t\t\t</Cell>\r\n\t\t\t\t<Cell\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t\tafter={<Switch aria-label=\"Пломба ЭСО\" />}\r\n\t\t\t\t>\r\n\t\t\t\t\tПломба ЭСО\r\n\t\t\t\t</Cell>\r\n\t\t\t\t<Cell\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t\tafter={<Switch aria-label=\"Антимагнитная\" />}\r\n\t\t\t\t>\r\n\t\t\t\t\tАнтимагнитная\r\n\t\t\t\t</Cell>\r\n\t\t\t\t<FormItem top='Дата'>\r\n\t\t\t\t\t<Input placeholder='Введите дату' value={new Date().toLocaleDateString('ru-RU')} onChange={() => { }} />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top='Место установки'>\r\n\t\t\t\t\t<Input placeholder='Введите место установки' />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top='Примечание'>\r\n\t\t\t\t\t<Input placeholder='Введите примечание' />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem>\r\n\t\t\t\t\t<Button size='l' stretched>Отправить</Button>\r\n\t\t\t\t</FormItem>\r\n\t\t\t</AnimateHeight>\r\n\t\t</Group>\r\n\t</Panel >\r\n}\r\n\r\nexport default Home;\r\n","import { Page, Router } from '@happysanta/router';\r\n\r\nexport const PAGE_MAIN = '/';\r\nexport const PAGE_AUTH = '/auth';\r\n\r\nexport const PANEL_MAIN = 'panel_main';\r\nexport const PANEL_AUTH = 'panel_auth';\r\n\r\nexport const VIEW_MAIN = 'view_main';\r\n\r\nexport const MODAL_CARD = 'modal_card';\r\nexport const MODAL_PAGE = 'modal_page';\r\nexport const MODAL_ERROR = 'modal_error';\r\n\r\nexport const POPOUT_CONFIRM = 'popout_confirm';\r\n\r\nconst routes = {\r\n\t[PAGE_MAIN]: new Page(PANEL_MAIN, VIEW_MAIN),\r\n\t[PAGE_AUTH]: new Page(PANEL_AUTH, VIEW_MAIN),\r\n};\r\n\r\nexport const router = new Router(routes);\r\n\r\nrouter.onEnterPage(PAGE_MAIN, () => {\r\n\tconsole.log('переход на главную страницу');\r\n});\r\n\r\nrouter.on('update', (nextRote, oldRoute) => {\r\n\tnextRote.getPageId() // /product/:id([0-9]+)\r\n\tnextRote.getParams() // { id: \"12\" }\r\n\tnextRote.getPanelId() // panel_product\r\n\tnextRote.getViewId() // view_main\r\n\tnextRote.getLocation() // /product/12\r\n\tnextRote.isModal() // false\r\n\tnextRote.isPopup() // false\r\n\tnextRote.hasOverlay() // false\r\n\r\n\tif (oldRoute) {\r\n\t\tconsole.log(`move from page ${oldRoute.getLocation()} -> ${nextRote.getLocation()}`);\r\n\t} else {\r\n\t\tconsole.log(`enter to page ${nextRote.getLocation()}`);\r\n\t}\r\n});\r\n\r\nrouter.start();\r\n","import axios from \"axios\"\r\n\r\nconst API_URL = 'https://ibronevik.ru/taxi/api/v1/'\r\n\r\nconst addToFormData = (formData, object) => {\r\n    for (let [key, value] of Object.entries(object)) {\r\n        if (!value) continue\r\n        formData.append(key, value)\r\n    }\r\n    return formData\r\n}\r\n\r\nexport const onLogin = (data) => {\r\n    let formData = new FormData()\r\n    addToFormData(formData, { ...data, type: 'e-mail' })\r\n    return axios.post(API_URL + 'auth', formData)\r\n        .then(res => res.data)\r\n        .then(res => {\r\n            if (res.auth_hash) {\r\n                let tokenFormData = new FormData()\r\n                addToFormData(tokenFormData, {\r\n                    auth_hash: res.auth_hash,\r\n                })\r\n                return axios.post(API_URL + 'token', tokenFormData)\r\n                    .then(tokenRes => tokenRes.data)\r\n                    .then(res => {\r\n                        if (res.data) {\r\n                            return res.data\r\n                        } else return res\r\n                    })\r\n            } else return res\r\n        })\r\n        .catch(e => { return { message: 'Network error' } })\r\n}","import React, { useState } from 'react';\r\nimport { Panel, PanelHeader, Button, Group, FormItem, Input, Div, FormLayout } from '@vkontakte/vkui';\r\nimport * as api from '../api/api';\r\nimport { useRouter } from '@happysanta/router';\r\nimport { MODAL_ERROR, PAGE_MAIN } from '../routers';\r\n\r\nconst Auth = ({ id, setModalErrorText }) => {\r\n\tconst [login, setLogin] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\r\n\tconst router = useRouter();\r\n\r\n\tconst onLogin = async () => {\r\n\t\tconst auth_data = await api.onLogin({ login, password })\r\n\t\tif (auth_data.message) {\r\n\t\t\tsetModalErrorText(auth_data.message)\r\n\t\t\trouter.pushModal(MODAL_ERROR)\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('token', auth_data.token)\r\n\t\t\tlocalStorage.setItem('u_hash', auth_data.u_hash)\r\n\t\t\trouter.replacePage(PAGE_MAIN)\r\n\t\t}\r\n\t}\r\n\treturn <Panel id={id}>\r\n\t\t<PanelHeader>Авторизация</PanelHeader>\r\n\t\t<Group>\r\n\t\t\t<FormLayout>\r\n\t\t\t\t<FormItem top='Логин'>\r\n\t\t\t\t\t<Input placeholder='Введите логин' value={login} onChange={(e) => setLogin(e.target.value)} />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top='Пароль'>\r\n\t\t\t\t\t<Input placeholder='Введите пароль' type='password' value={password} onChange={(e) => setPassword(e.target.value)} />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<Div>\r\n\t\t\t\t\t<Button type='submit' stretched size='l' onClick={onLogin} disabled={login.length === 0 || password.length === 0}>Войти</Button>\r\n\t\t\t\t</Div>\r\n\t\t\t</FormLayout>\r\n\t\t</Group>\r\n\t</Panel>\r\n}\r\n\r\nexport default Auth;\r\n","import { ModalCard } from '@vkontakte/vkui';\r\nimport React from 'react';\r\nimport { useRouter } from '@happysanta/router';\r\n\r\nexport function CardError({ id, modalErrorText }) {\r\n\tconst router = useRouter();\r\n\treturn <ModalCard\r\n\t\tid={id}\r\n\t\tonClose={() => router.popPage()}\r\n\t\theader=\"Error\"\r\n\t\tsubheader={modalErrorText}\r\n\t/>;\r\n}\r\n","import '@vkontakte/vkui/dist/vkui.css';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ModalRoot, SplitLayout, SplitCol, View, AdaptivityProvider, AppRoot, ConfigProvider, WebviewType } from '@vkontakte/vkui';\r\nimport Home from './panels/Home';\r\nimport { MODAL_ERROR, PAGE_AUTH, PANEL_AUTH, PANEL_MAIN, VIEW_MAIN } from './routers';\r\nimport { useLocation, useRouter } from '@happysanta/router';\r\nimport './panels/style.css'\r\nimport Auth from './panels/Auth';\r\nimport { CardError } from './modals/CardError';\r\nfunction App() {\r\n\tconst location = useLocation();\r\n\tconst router = useRouter();\r\n\r\n\tconst [modalErrorText, setModalErrorText] = useState('')\r\n\r\n\tconst modal = <ModalRoot activeModal={location.getModalId()}\r\n\t\tonClose={() => router.popPage()}\r\n\t>\r\n\t\t<CardError id={MODAL_ERROR} onClose={() => router.popPage()} modalErrorText={modalErrorText} />\r\n\t</ModalRoot>;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!localStorage.getItem('token') && !localStorage.getItem('u_hash')) {\r\n\t\t\trouter.replacePage(PAGE_AUTH)\r\n\t\t}\r\n\t}, [router]);\r\n\r\n\r\n\treturn <ConfigProvider webviewType={WebviewType.INTERNAL}>\r\n\t\t<AdaptivityProvider>\r\n\t\t\t<AppRoot>\r\n\t\t\t\t<SplitLayout modal={modal} style={{ justifyContent: \"center\" }}>\r\n\t\t\t\t\t<SplitCol maxWidth={800} spaced={window.innerWidth > 800}>\r\n\t\t\t\t\t\t<View id={VIEW_MAIN}\r\n\t\t\t\t\t\t\tonSwipeBack={() => router.popPage()}\r\n\t\t\t\t\t\t\thistory={location.hasOverlay() ? [] : location.getViewHistory(VIEW_MAIN)}\r\n\t\t\t\t\t\t\tactivePanel={location.getViewActivePanel(VIEW_MAIN)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Home id={PANEL_MAIN} />\r\n\t\t\t\t\t\t\t<Auth id={PANEL_AUTH} setModalErrorText={setModalErrorText} />\r\n\t\t\t\t\t\t</View>\r\n\r\n\t\t\t\t\t</SplitCol>\r\n\t\t\t\t</SplitLayout>\r\n\t\t\t</AppRoot>\r\n\t\t</AdaptivityProvider>\r\n\t</ConfigProvider>\r\n\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","import 'core-js/features/map';\r\nimport 'core-js/features/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { RouterContext } from '@happysanta/router';\r\nimport { router } from './routers';\r\n\r\nReactDOM.render(<RouterContext.Provider value={router}>\r\n\t<App />\r\n</RouterContext.Provider>, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}