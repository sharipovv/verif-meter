{"version":3,"sources":["panels/Home.js","routers.js","api/api.js","panels/Auth.js","modals/CardError.js","App.js","index.js"],"names":["tempData","id","city","street","house","apartment","transferred","saved","Home","useState","data","setData","additionalFields","setAdditionalFields","addssFields","setAddssFields","autoCam","setAutoCam","cityOptions","setCityOptions","streetOptions","setStreetOptions","houseOptions","setHouseOptions","apartmentOptions","setApartmentOptions","cityValue","setCityValue","streetValue","setStreetValue","houseValue","setHouseValue","apartmentValue","setApartmentValue","apartmentItem","setApartmentItem","valMeterValue","setValMeterValue","activePhoto","setActivePhoto","modeSendBtn","setModeSendBtn","valMeterRef","useRef","photoRef","useEffect","cityVariables","Set","map","x","label","value","toggleApartment","item","console","log","setTimeout","current","click","after","onClick","height","top","placeholder","searchable","options","onChange","e","target","streetsOfCity","filter","streetVariables","disabled","housesOfCity","housesVariables","showArrows","getScrollToLeft","i","getScrollToRight","mode","style","display","className","key","selected","apartmentsOfCity","toggleHouse","color","getRef","before","controlSize","stretched","accept","capture","files","length","reader","FileReader","addEventListener","result","focus","readAsDataURL","backgroundImage","backgroundSize","backgroundPosition","borderRadius","autoFocus","type","inputMode","width","newData","forEach","element","push","checked","Array","keys","toString","aria-label","Date","toLocaleDateString","routes","Page","router","Router","onEnterPage","on","nextRote","oldRoute","getPageId","getParams","getPanelId","getViewId","getLocation","isModal","isPopup","hasOverlay","start","API_URL","addToFormData","formData","object","Object","entries","append","onLogin","FormData","axios","post","then","res","auth_hash","tokenFormData","tokenRes","catch","message","Auth","setModalErrorText","login","setLogin","password","setPassword","useRouter","a","api","auth_data","pushModal","localStorage","setItem","token","u_hash","replacePage","size","CardError","modalErrorText","onClose","popPage","header","subheader","App","location","useLocation","modal","activeModal","getModalId","webviewType","WebviewType","INTERNAL","justifyContent","maxWidth","spaced","window","innerWidth","onSwipeBack","history","getViewHistory","activePanel","getViewActivePanel","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.b27cf648.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Panel, PanelHeader, Button, Group, Tabs, TabsItem, Cell, FormItem, File, CellButton, Input, Switch, HorizontalScroll, Select, Checkbox, Div, PanelHeaderButton, FormStatus, WriteBar, WriteBarIcon, Card } from '@vkontakte/vkui';\r\n\r\nimport { Icon12Verified, Icon24Camera, Icon24ChevronDown, Icon24ChevronUp, Icon28HelpCircleOutline, Icon28SmileOutline, Icon56AddCircleOutline } from '@vkontakte/icons';\r\nimport AnimateHeight from 'react-animate-height';\r\n// import CropImg from '../components/CropImg'\r\n// import Webcam from 'react-webcam';\r\n\r\nlet tempData = [{\r\n\tid: 1,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Чернышевского\",\r\n\thouse: \"22\",\r\n\tapartment: \"1\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 2,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Чернышевского\",\r\n\thouse: \"22\",\r\n\tapartment: \"2\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 3,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Чернышевского\",\r\n\thouse: \"22\",\r\n\tapartment: \"3\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 4,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"1\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 5,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"2\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 5,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"3\",\r\n\tapartment: \"3\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 6,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"3\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 7,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"4\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 8,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"5\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 9,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"6\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 10,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"7\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n}, {\r\n\tid: 11,\r\n\tcity: \"Воронеж\",\r\n\tstreet: \"Победы\",\r\n\thouse: \"2\",\r\n\tapartment: \"8\",\r\n\ttransferred: false,\r\n\tsaved: false,\r\n},]\r\n\r\nconst Home = ({ id }) => {\r\n\tconst [data, setData] = useState(tempData)\r\n\r\n\tconst [additionalFields, setAdditionalFields] = useState(false)\r\n\tconst [addssFields, setAddssFields] = useState(true)\r\n\tconst [previewFields, setPreviewFields] = useState(true)\r\n\tconst [autoCam, setAutoCam] = useState(true)\r\n\r\n\tconst [cityOptions, setCityOptions] = useState([])\r\n\tconst [streetOptions, setStreetOptions] = useState([])\r\n\tconst [houseOptions, setHouseOptions] = useState([])\r\n\tconst [apartmentOptions, setApartmentOptions] = useState([])\r\n\r\n\tconst [cityValue, setCityValue] = useState('')\r\n\tconst [streetValue, setStreetValue] = useState('')\r\n\tconst [houseValue, setHouseValue] = useState('')\r\n\tconst [apartmentValue, setApartmentValue] = useState('')\r\n\tconst [apartmentItem, setApartmentItem] = useState(null)\r\n\r\n\tconst [valMeterValue, setValMeterValue] = useState('')\r\n\tconst [activePhoto, setActivePhoto] = useState(null)\r\n\t// const [activePhotoCrop, setActivePhotoCrop] = useState(null)\r\n\r\n\tconst [modeSendBtn, setModeSendBtn] = useState('send')\r\n\r\n\t// const webcamRef = useRef(null);\r\n\t// const [imgSrc, setImgSrc] = useState(null);\r\n\tconst valMeterRef = useRef(null);\r\n\tconst photoRef = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet cityVariables = [...new Set(data.map(x => x.city))]\r\n\t\tsetCityOptions(cityVariables.map(x => { return { label: x, value: x } }))\r\n\t}, []);\r\n\r\n\t// const capture = useCallback(() => {\r\n\t// \tconst imageSrc = webcamRef.current.getScreenshot();\r\n\t// \tsetImgSrc(imageSrc);\r\n\t// }, [webcamRef, setImgSrc]);\r\n\r\n\tconst changeFile = (e) => {\r\n\t\tconsole.log(e.target.files)\r\n\t\tif (e.target.files && e.target.files.length > 0) {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener('load', () => {\r\n\t\t\t\tsetActivePhoto(reader.result)\r\n\t\t\t\tif (valMeterRef && valMeterRef.current)\r\n\t\t\t\t\tsetTimeout(() => valMeterRef.current.click().focus(), 200)\r\n\r\n\t\t\t}\r\n\t\t\t);\r\n\t\t\treader.readAsDataURL(e.target.files[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tconst toggleCity = (e) => {\r\n\t\tlet city = e.target.value\r\n\t\tlet streetsOfCity = data.filter(x => x.city === city)\r\n\t\tlet streetVariables = [...new Set(streetsOfCity.map(x => x.street))]\r\n\t\tsetStreetOptions(streetVariables.map(x => { return { label: x, value: x } }))\r\n\t\tsetCityValue(city)\r\n\t\tsetStreetValue('')\r\n\t\tsetHouseValue('')\r\n\t\tsetApartmentValue('')\r\n\t}\r\n\r\n\tconst toggleStreet = (e) => {\r\n\t\tlet street = e.target.value\r\n\t\tlet housesOfCity = data.filter(x => x.city === cityValue && x.street === street)\r\n\t\tlet housesVariables = [...new Set(housesOfCity.map(x => x.house))]\r\n\t\tsetHouseOptions(housesVariables)\r\n\t\tsetStreetValue(street)\r\n\t\tsetHouseValue('')\r\n\t\tsetApartmentValue('')\r\n\t}\r\n\r\n\tconst toggleHouse = (house) => {\r\n\t\tlet apartmentsOfCity = data.filter(x => x.city === cityValue && x.street === streetValue && x.house === house)\r\n\t\tsetApartmentOptions(apartmentsOfCity)\r\n\t\tsetHouseValue(house)\r\n\t\tsetApartmentValue('')\r\n\t}\r\n\r\n\tconst toggleApartment = (item) => {\r\n\t\tconsole.log(item)\r\n\t\tsetModeSendBtn('send')\r\n\t\tsetApartmentValue(item.apartment)\r\n\t\tsetApartmentItem(item)\r\n\t\tif (autoCam)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (photoRef.current) photoRef.current.click()\r\n\t\t\t}, 200);\r\n\r\n\t\tconsole.log(photoRef.current)\r\n\t\t// document.getElementById('btnPhoto').click()\r\n\t}\r\n\r\n\tconst sendValMeter = () => {\r\n\t\tconsole.log('sendValMeter')\r\n\t\tsetValMeterValue('')\r\n\t\tsetModeSendBtn('done')\r\n\t\tlet newData = []\r\n\t\tdata.forEach(element => {\r\n\t\t\tif (element.id === apartmentItem.id)\r\n\t\t\t\tnewData.push({ ...element, transferred: true })\r\n\t\t\telse newData.push({ ...element })\r\n\t\t});\r\n\t\tsetData(newData)\r\n\r\n\t\tlet apartmentsOfCity = newData.filter(x => x.city === cityValue && x.street === streetValue && x.house === houseValue)\r\n\t\tsetApartmentOptions(apartmentsOfCity)\r\n\t}\r\n\r\n\r\n\treturn <Panel id={id}>\r\n\t\t<Group>\r\n\t\t\t<CellButton after={addssFields ? <Icon24ChevronUp /> : <Icon24ChevronDown />} onClick={() => setAddssFields(!addssFields)}>Локатор</CellButton>\r\n\t\t\t<AnimateHeight height={addssFields ? 'auto' : 0}>\r\n\t\t\t\t<FormItem top=\"Город\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"Выберите город\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={cityOptions}\r\n\t\t\t\t\t\tvalue={cityValue}\r\n\t\t\t\t\t\tonChange={toggleCity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t{cityValue !== '' && <FormItem top=\"Улица\">\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdisabled={cityValue === ''}\r\n\t\t\t\t\t\tplaceholder=\"Выберите улицу\"\r\n\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\toptions={streetOptions}\r\n\t\t\t\t\t\tvalue={streetValue}\r\n\t\t\t\t\t\tonChange={toggleStreet}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FormItem>}\r\n\t\t\t\t{streetValue !== '' && <FormItem top=\"Дом\">\r\n\t\t\t\t\t<HorizontalScroll\r\n\t\t\t\t\t\tshowArrows\r\n\t\t\t\t\t\tgetScrollToLeft={(i) => i - 120}\r\n\t\t\t\t\t\tgetScrollToRight={(i) => i + 120}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tabs mode=\"buttons\" style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t\t{houseOptions.map(item => <div className='mh4' key={item}>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tselected={item === houseValue}\r\n\t\t\t\t\t\t\t\t\tonClick={() => toggleHouse(item)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t\t\t</TabsItem>\r\n\t\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</HorizontalScroll>\r\n\t\t\t\t</FormItem>}\r\n\t\t\t</AnimateHeight>\r\n\t\t\t{houseValue !== '' && <FormItem top=\"Квартира\">\r\n\t\t\t\t<HorizontalScroll\r\n\t\t\t\t\tshowArrows\r\n\t\t\t\t\tgetScrollToLeft={(i) => i - 120}\r\n\t\t\t\t\tgetScrollToRight={(i) => i + 120}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Tabs mode=\"buttons\" style={{ display: \"flex\" }}>\r\n\t\t\t\t\t\t{apartmentOptions.filter(i => !i.transferred)\r\n\t\t\t\t\t\t\t.map(item => <div className='mh4' key={item.id}>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tselected={item.apartment === apartmentValue}\r\n\t\t\t\t\t\t\t\t\tonClick={() => toggleApartment(item)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{item.apartment}\r\n\t\t\t\t\t\t\t\t</TabsItem>\r\n\t\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t\t{apartmentOptions.filter(i => i.transferred)\r\n\t\t\t\t\t\t\t.map(item => <div className='mh4' key={item.id}>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tselected={item.apartment === apartmentValue}\r\n\t\t\t\t\t\t\t\t\tonClick={() => toggleApartment(item)}\r\n\t\t\t\t\t\t\t\t\tafter={<Icon12Verified style={{ color: \"var(--accent)\" }} />}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{item.apartment}\r\n\t\t\t\t\t\t\t\t</TabsItem>\r\n\t\t\t\t\t\t\t</div>)}\r\n\t\t\t\t\t\t{/* {apartmentOptions.map(item => <div className='mh4' key={item.id}>\r\n\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\tselected={item.apartment === apartmentValue}\r\n\t\t\t\t\t\t\t\tonClick={() => toggleApartment(item.apartment)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i}\r\n\t\t\t\t\t\t\t</TabsItem>\r\n\t\t\t\t\t\t</div>)} */}\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t</HorizontalScroll>\r\n\t\t\t</FormItem>}\r\n\r\n\t\t\t{/* <FormItem><FormStatus>1 вариант. Стандартная камера, чекбокс для автоматического открытия после выбора квартиры</FormStatus></FormItem> */}\r\n\r\n\t\t\t{/* <Div style={{ display: 'flex' }}>\r\n\r\n\t\t\t\t<File id='btnPhoto' before={<Icon24Camera />} controlSize=\"l\" stretched accept=\"image/*\" capture='camera' style={{ marginRight: 8 }} onChange={changeFile}>\r\n\t\t\t\t\tСделать фото\r\n\t\t\t\t</File>\r\n\t\t\t\t<Button className='btnText' before={<Icon24Camera />} size=\"l\" mode=\"secondary\" stretched disabled>Просмотр фото</Button>\r\n\t\t\t</Div> */}\r\n\r\n\t\t\t{apartmentValue !== \"\" && <Div>\r\n\t\t\t\t<File getRef={photoRef} id='btnPhoto' before={<Icon24Camera />} controlSize=\"l\" stretched accept=\"image/*\" capture='camera' onChange={changeFile}>\r\n\t\t\t\t\tСделать фото\r\n\t\t\t\t</File>\r\n\t\t\t</Div>}\r\n\r\n\t\t\t{activePhoto && <Div>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\theight: 200,\r\n\t\t\t\t\t\tbackgroundImage: 'url(\"' + activePhoto + '\")',\r\n\t\t\t\t\t\tbackgroundSize: 'cover',\r\n\t\t\t\t\t\tbackgroundPosition: 'center',\r\n\t\t\t\t\t\tborderRadius: 8\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{/* <Icon56AddCircleOutline /> */}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card>\r\n\t\t\t</Div>}\r\n\t\t\t{/* <FormItem><FormStatus>2 вариант. Всегда открытая \"веб-камера\". Качество как на экране. </FormStatus></FormItem>\r\n\t\t\t<Webcam\r\n\t\t\t\tref={webcamRef}\r\n\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\taudio={false}\r\n\t\t\t\tscreenshotFormat=\"image/jpeg\"\r\n\t\t\t\tvideoConstraints={{\r\n\t\t\t\t\tfacingMode: \"environment\"\r\n\t\t\t\t}}\r\n\t\t\t\tscreenshotQuality={1}\r\n\t\t\t/>\r\n\t\t\t<Div>\r\n\t\t\t\t<Button before={<Icon24Camera />} size=\"l\" stretched onClick={capture}>Сделать фото</Button>\r\n\t\t\t</Div>\r\n\t\t\t{imgSrc && (\r\n\t\t\t\t<a href={imgSrc} target='_blank' rel=\"noopener noreferrer\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={imgSrc}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t)} */}\r\n\r\n\t\t\t{/* <CropImg activePhoto={activePhoto} setActivePhotoCrop={setActivePhotoCrop} /> */}\r\n\r\n\r\n\t\t\t{apartmentValue !== \"\" && <Div style={{ display: 'flex' }}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t\tvalue={valMeterValue}\r\n\t\t\t\t\tonChange={(e) => setValMeterValue(e.target.value)}\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tinputMode=\"decimal\"\r\n\t\t\t\t\tplaceholder='Введите показание'\r\n\t\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\t\tgetRef={valMeterRef} />\r\n\t\t\t\t<WriteBarIcon mode={modeSendBtn} disabled={valMeterValue.length === 0} onClick={sendValMeter} />\r\n\t\t\t</Div>}\r\n\r\n\t\t\t{/* <FormItem>\r\n\t\t\t\t<Button size='l' stretched>Отправить</Button>\r\n\t\t\t</FormItem> */}\r\n\t\t\t<FormItem>\r\n\t\t\t\t<Checkbox checked={autoCam} onChange={e => setAutoCam(e.target.checked)}>Автоматическое открытие камеры</Checkbox>\r\n\t\t\t\t{/* <Checkbox>Автоматический переход к следующей квартире</Checkbox> */}\r\n\t\t\t\t{/* <Checkbox checked={previewFields} onChange={e => setPreviewFields(e.target.checked)}>Предпросмотр фото</Checkbox> */}\r\n\t\t\t</FormItem>\r\n\r\n\t\t\t{apartmentValue !== \"\" && <><CellButton after={additionalFields ? <Icon24ChevronUp /> : <Icon24ChevronDown />} onClick={() => setAdditionalFields(!additionalFields)}>Дополнительные поля</CellButton>\r\n\t\t\t\t<AnimateHeight height={additionalFields ? 'auto' : 0}>\r\n\t\t\t\t\t<FormItem top='Тип ПУ'>\r\n\t\t\t\t\t\t<Input placeholder='Введите тип ПУ' />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem top='Номер ПУ'>\r\n\t\t\t\t\t\t<Input placeholder='Введите номер ПУ' />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem top=\"Год поверки\">\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"Выберите год поверки\"\r\n\t\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\t\toptions={[...Array(23).keys()].map(i => {\r\n\t\t\t\t\t\t\t\treturn { label: (2000 + i).toString(), value: (2000 + i).toString() }\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem top=\"Класс точности\">\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"Выберите класс точности\"\r\n\t\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\t\toptions={[{\r\n\t\t\t\t\t\t\t\tlabel: \"1.0\",\r\n\t\t\t\t\t\t\t\tvalue: \"1.0\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: \"2.0\",\r\n\t\t\t\t\t\t\t\tvalue: \"2.0\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: \"2.5\",\r\n\t\t\t\t\t\t\t\tvalue: \"2.5\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: \"5.0\",\r\n\t\t\t\t\t\t\t\tvalue: \"5.0\",\r\n\t\t\t\t\t\t\t}]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem top=\"Значность\">\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"Выберите значность\"\r\n\t\t\t\t\t\t\tsearchable='true'\r\n\t\t\t\t\t\t\toptions={[{\r\n\t\t\t\t\t\t\t\tlabel: \"1\",\r\n\t\t\t\t\t\t\t\tvalue: \"1\",\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tlabel: \"4\",\r\n\t\t\t\t\t\t\t\tvalue: \"4\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: \"5\",\r\n\t\t\t\t\t\t\t\tvalue: \"5\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: \"6\",\r\n\t\t\t\t\t\t\t\tvalue: \"6\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlabel: \"7\",\r\n\t\t\t\t\t\t\t\tvalue: \"7\",\r\n\t\t\t\t\t\t\t}]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<Cell\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\tafter={<Switch aria-label=\"Пломба поверки\" />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tПломба поверки\r\n\t\t\t\t\t</Cell>\r\n\t\t\t\t\t<Cell\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\tafter={<Switch aria-label=\"Пломба ЭСО\" />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tПломба ЭСО\r\n\t\t\t\t\t</Cell>\r\n\t\t\t\t\t<Cell\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\tafter={<Switch aria-label=\"Антимагнитная\" />}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tАнтимагнитная\r\n\t\t\t\t\t</Cell>\r\n\t\t\t\t\t<FormItem top='Дата'>\r\n\t\t\t\t\t\t<Input placeholder='Введите дату' value={new Date().toLocaleDateString('ru-RU')} onChange={() => { }} />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem top='Место установки'>\r\n\t\t\t\t\t\t<Input placeholder='Введите место установки' />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t<FormItem top='Примечание'>\r\n\t\t\t\t\t\t<Input placeholder='Введите примечание' />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</AnimateHeight>\r\n\t\t\t</>}\r\n\t\t</Group>\r\n\t</Panel >\r\n}\r\n\r\nexport default Home;\r\n","import { Page, Router } from '@happysanta/router';\r\n\r\nexport const PAGE_MAIN = '/';\r\nexport const PAGE_AUTH = '/auth';\r\n\r\nexport const PANEL_MAIN = 'panel_main';\r\nexport const PANEL_AUTH = 'panel_auth';\r\n\r\nexport const VIEW_MAIN = 'view_main';\r\n\r\nexport const MODAL_CARD = 'modal_card';\r\nexport const MODAL_PAGE = 'modal_page';\r\nexport const MODAL_ERROR = 'modal_error';\r\n\r\nexport const POPOUT_CONFIRM = 'popout_confirm';\r\n\r\nconst routes = {\r\n\t[PAGE_MAIN]: new Page(PANEL_MAIN, VIEW_MAIN),\r\n\t[PAGE_AUTH]: new Page(PANEL_AUTH, VIEW_MAIN),\r\n};\r\n\r\nexport const router = new Router(routes);\r\n\r\nrouter.onEnterPage(PAGE_MAIN, () => {\r\n\tconsole.log('переход на главную страницу');\r\n});\r\n\r\nrouter.on('update', (nextRote, oldRoute) => {\r\n\tnextRote.getPageId() // /product/:id([0-9]+)\r\n\tnextRote.getParams() // { id: \"12\" }\r\n\tnextRote.getPanelId() // panel_product\r\n\tnextRote.getViewId() // view_main\r\n\tnextRote.getLocation() // /product/12\r\n\tnextRote.isModal() // false\r\n\tnextRote.isPopup() // false\r\n\tnextRote.hasOverlay() // false\r\n\r\n\tif (oldRoute) {\r\n\t\tconsole.log(`move from page ${oldRoute.getLocation()} -> ${nextRote.getLocation()}`);\r\n\t} else {\r\n\t\tconsole.log(`enter to page ${nextRote.getLocation()}`);\r\n\t}\r\n});\r\n\r\nrouter.start();\r\n","import axios from \"axios\"\r\n\r\nconst API_URL = 'https://ibronevik.ru/taxi/api/v1/'\r\n\r\nconst addToFormData = (formData, object) => {\r\n    for (let [key, value] of Object.entries(object)) {\r\n        if (!value) continue\r\n        formData.append(key, value)\r\n    }\r\n    return formData\r\n}\r\n\r\nexport const onLogin = (data) => {\r\n    let formData = new FormData()\r\n    addToFormData(formData, { ...data, type: 'e-mail' })\r\n    return axios.post(API_URL + 'auth', formData)\r\n        .then(res => res.data)\r\n        .then(res => {\r\n            if (res.auth_hash) {\r\n                let tokenFormData = new FormData()\r\n                addToFormData(tokenFormData, {\r\n                    auth_hash: res.auth_hash,\r\n                })\r\n                return axios.post(API_URL + 'token', tokenFormData)\r\n                    .then(tokenRes => tokenRes.data)\r\n                    .then(res => {\r\n                        if (res.data) {\r\n                            return res.data\r\n                        } else return res\r\n                    })\r\n            } else return res\r\n        })\r\n        .catch(e => { return { message: 'Network error' } })\r\n}","import React, { useState } from 'react';\r\nimport { Panel, PanelHeader, Button, Group, FormItem, Input, Div, FormLayout } from '@vkontakte/vkui';\r\nimport * as api from '../api/api';\r\nimport { useRouter } from '@happysanta/router';\r\nimport { MODAL_ERROR, PAGE_MAIN } from '../routers';\r\n\r\nconst Auth = ({ id, setModalErrorText }) => {\r\n\tconst [login, setLogin] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\r\n\tconst router = useRouter();\r\n\r\n\tconst onLogin = async () => {\r\n\t\tconst auth_data = await api.onLogin({ login, password })\r\n\t\tif (auth_data.message) {\r\n\t\t\tsetModalErrorText(auth_data.message)\r\n\t\t\trouter.pushModal(MODAL_ERROR)\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('token', auth_data.token)\r\n\t\t\tlocalStorage.setItem('u_hash', auth_data.u_hash)\r\n\t\t\trouter.replacePage(PAGE_MAIN)\r\n\t\t}\r\n\t}\r\n\treturn <Panel id={id}>\r\n\t\t<PanelHeader>Авторизация</PanelHeader>\r\n\t\t<Group>\r\n\t\t\t<FormLayout>\r\n\t\t\t\t<FormItem top='Логин'>\r\n\t\t\t\t\t<Input placeholder='Введите логин' value={login} onChange={(e) => setLogin(e.target.value)} />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<FormItem top='Пароль'>\r\n\t\t\t\t\t<Input placeholder='Введите пароль' type='password' value={password} onChange={(e) => setPassword(e.target.value)} />\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t<Div>\r\n\t\t\t\t\t<Button type='submit' stretched size='l' onClick={onLogin} disabled={login.length === 0 || password.length === 0}>Войти</Button>\r\n\t\t\t\t</Div>\r\n\t\t\t</FormLayout>\r\n\t\t</Group>\r\n\t</Panel>\r\n}\r\n\r\nexport default Auth;\r\n","import { ModalCard } from '@vkontakte/vkui';\r\nimport React from 'react';\r\nimport { useRouter } from '@happysanta/router';\r\n\r\nexport function CardError({ id, modalErrorText }) {\r\n\tconst router = useRouter();\r\n\treturn <ModalCard\r\n\t\tid={id}\r\n\t\tonClose={() => router.popPage()}\r\n\t\theader=\"Error\"\r\n\t\tsubheader={modalErrorText}\r\n\t/>;\r\n}\r\n","import '@vkontakte/vkui/dist/vkui.css';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ModalRoot, SplitLayout, SplitCol, View, AdaptivityProvider, AppRoot, ConfigProvider, WebviewType } from '@vkontakte/vkui';\r\nimport Home from './panels/Home';\r\nimport { MODAL_ERROR, PAGE_AUTH, PANEL_AUTH, PANEL_MAIN, VIEW_MAIN } from './routers';\r\nimport { useLocation, useRouter } from '@happysanta/router';\r\nimport './panels/style.css'\r\nimport Auth from './panels/Auth';\r\nimport { CardError } from './modals/CardError';\r\nfunction App() {\r\n\tconst location = useLocation();\r\n\tconst router = useRouter();\r\n\r\n\tconst [modalErrorText, setModalErrorText] = useState('')\r\n\r\n\tconst modal = <ModalRoot activeModal={location.getModalId()}\r\n\t\tonClose={() => router.popPage()}\r\n\t>\r\n\t\t<CardError id={MODAL_ERROR} onClose={() => router.popPage()} modalErrorText={modalErrorText} />\r\n\t</ModalRoot>;\r\n\r\n\t// useEffect(() => {\r\n\t// \tif (!localStorage.getItem('token') && !localStorage.getItem('u_hash')) {\r\n\t// \t\trouter.replacePage(PAGE_AUTH)\r\n\t// \t}\r\n\t// }, [router]);\r\n\r\n\r\n\treturn <ConfigProvider webviewType={WebviewType.INTERNAL}>\r\n\t\t<AdaptivityProvider>\r\n\t\t\t<AppRoot>\r\n\t\t\t\t<SplitLayout modal={modal} style={{ justifyContent: \"center\" }}>\r\n\t\t\t\t\t<SplitCol maxWidth={800} spaced={window.innerWidth > 800}>\r\n\t\t\t\t\t\t<View id={VIEW_MAIN}\r\n\t\t\t\t\t\t\tonSwipeBack={() => router.popPage()}\r\n\t\t\t\t\t\t\thistory={location.hasOverlay() ? [] : location.getViewHistory(VIEW_MAIN)}\r\n\t\t\t\t\t\t\tactivePanel={location.getViewActivePanel(VIEW_MAIN)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Home id={PANEL_MAIN} />\r\n\t\t\t\t\t\t\t<Auth id={PANEL_AUTH} setModalErrorText={setModalErrorText} />\r\n\t\t\t\t\t\t</View>\r\n\r\n\t\t\t\t\t</SplitCol>\r\n\t\t\t\t</SplitLayout>\r\n\t\t\t</AppRoot>\r\n\t\t</AdaptivityProvider>\r\n\t</ConfigProvider>\r\n\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","import 'core-js/features/map';\r\nimport 'core-js/features/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { RouterContext } from '@happysanta/router';\r\nimport { router } from './routers';\r\n\r\nReactDOM.render(<RouterContext.Provider value={router}>\r\n\t<App />\r\n</RouterContext.Provider>, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}